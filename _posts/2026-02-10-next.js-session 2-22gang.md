---
layout: single
title: "[next.js] Context API - TabProvider를 활용한 홈 탭 상태관리"
date: 2026-02-11
categories: [next.js]
---
x.com의 로그인 후, 메인페이지를 보게 된다면 중앙에 '추천/팔로우'와 '내용'이 등장한다. 이때 추천/팔로우를 번갈아서 클릭 했을 때, 내용이 전환 될 필요가 존재한다.

문제는 '추천/팔로우'와'내용'의 각 컴포넌트가 형제(병렬) 관계이기 때문에, 일반적인 props 전달로는 상태를 공유 할 수 없다는 점이다.(React는 "데이터는 위에서 아래로 흐른다." 라는 단방향 데이터흐름 설계원칙을 가지고 있어 부모 → 자식 prop전달이 기본이다.) 

## 형제간의 Props 공유?
결국 이를 해결하려면, '공통부모에서 상태를 내려주는 방식'이 필요하고 가장 간단한 방법으로 React의 ContextAPI를 활용하는 것이다. Redux같은 외부 라이브러리 없이 React 내장 기능만으로 해결할 수 있다.
![Context API 사용예시](/assets/post_images/2026-02-11/image5.png)

## 그럼 적용은 어떻게?
### 먼저 적용되는 기술은 아래와 같다.

- React Context API — createContext로 전역 상태 저장소를 만들고, Provider로 하위 컴포넌트에 공유
- useState — 현재 탭 상태("rec" 또는 "fol")를 관리
- "use client" — 탭 전환은 사용자 인터랙션이므로 클라이언트 컴포넌트로 선언 필요(서버 클라이언트에선 사용불가)

### Context API - TabProvider 작성
```tsx
"use client";

import { ReactNode, createContext, useState } from "react";

// 1. Context API의 createContext로 저장소를 만든다
export const TabContext = createContext({
  tab: "rec", // 현재 탭 상태
  setTab: (value: "rec" | "fol") => {}, // 탭 전환 함수 ("rec" 추천 | "fol" 팔로우)
});

type Props = { children: ReactNode};

export default function TabProvider({ children }: Props) {
  const [tab, setTab] = useState("rec");

  return (
    // 2. Context API의 Provider를 활용해서 TabProvider 컴포넌트를 만듦 
    <TabContext.Provider value={{ tab, setTab }}> {/* value = 공유 props */}
      {children} {/* children = <Tab />, <Post /> 등 형제 컴포넌트들 */}
    </TabContext.Provider>
  );
}
```
1의 경우, API 호출을 통한 TabContext를 설정해준다. Props의 기본값과 전환될 값을 설정해준다.  
2의 경우, 적용될 컴포넌트를 감싸준다 (value값: 스위칭 될 Props)

### home/page.tsx에서의 적용
```tsx
export default function Home() {
  return (
    <main>
      홈페이지
    <main className={style.main}>
      <TabProvider> {/* 적용될 컴포넌트를 감싼다.*/}
        <Tab/>
        <Post/> 
        <Post/>
        <Post/>
      </TabProvider>
    </main>
  )
}
```
Tab 컴포넌트에서 Props: rec,fol을 받으면,Post는 Props에 따라 내용을 전환해준다.

## 적용 결과

![하드코딩 결과](/assets/post_images/2026-02-11/image6.png)


아직은 상태 받는쪽의 tab.tsx에서 설정을 안해주었기에 전환은 안되는상태. 프레임만 잡았다고 생각하자.